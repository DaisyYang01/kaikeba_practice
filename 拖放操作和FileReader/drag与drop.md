# 目标
- HTML5中原生拖放（drag & drop）API与拖放事件
- 拖放流程
- 拖放中的兼容

# 什么是 Drag 与 Drop
- drag：拖拉、拖拽
- drop：放置、放下
在一个WEB页面中，选中文本、图像、链接默认是可拖动的
当一段文本、图像或者链接被拖动的时候，文本内容、图像、链接URL被设定为拖动数据
默认情况下，除了选中的文本、图像或者链接，其他元素是不可拖放的

# 完整的拖放流程
- 拖拽
- 放置

### 拖拽（drag）
- 设置拖拽属性
- 监听处理拖拽事件
- 设置拖放数据

### 放置（drop）
- 设置（开启）元素放置特性
- 监听处理拖拽与放置事件
- 处理放置数据或后续行为

# 拖放事件
拖放事件分为：基于拖拽元素的事件、基于放置元素的事件
- dragstart：当用户开始拖动一个元素或选中文本时触发 （被拖动元素）
- drag：当拖动元素或选中的文本时触发，每100毫秒触发一次 （被拖动元素）
- dragend：当拖拽操作结束时触发，比如松开鼠标按键或敲“Esc”键 （被拖动元素）
- dragenter：当拖动元素或选中的文本到一个可释放目标时触发 （可放置元素）
- dragover：当元素或选中的文本被拖到一个可释放目标上时触发，每100毫秒触发一次 （可放置元素）
- dragleave：当拖动元素或选中的文本离开一个可释放目标时触发 （可放置元素）
- drop：当元素或选中的文本在可释放目标上被释放时触发 （可放置元素）

# 拖放数据
我们把拖放过程中的效果和拖放产生的内容都称为拖放数据，要对拖放数据进行操作，首先我们得先了解一个对象：DataTransfer
DataTransfer：所有拖放事件的event对象都有一个dataTransfer属性，我们可以通过它来设置和获取拖放过程中的数据。dataTransfer属性的值是一个DataTransfer类型的对象

### 拖动内容
DataTransfer.setData(type, data) - 设置拖放内容
- type：要设置数据的MIME类型
- data：要设置的数据
DataTransfer.getData(type) - 获取对应类型的拖放内容
- type：要设置数据的MIME类型
DataTransfer.clearData([type]) - 清空指定内容
- type：要删除的数据的MIME类型，如果不传type，则清空所有数据

### 拖动效果
我们可以给拖放过程设置一定的效果（类似鼠标指针效果）
- copy：复制到新的位置
- move：移动到新的位置
- link：建立一个源位置到新位置的链接
- none：禁止放置（禁止任何操作）

### dropEffect
获取/设置实际的拖放效果，它应该始终设置成effectAllowed的可能值之一
- 在dragover事件中，会重置拖动动作为none，所以我们可以把想要的拖放效果在该事件中进行设置
- 这些值得设置更多的只是给用户一种视觉上的反馈，不具备具体的实际功能，但当值为none的时候，那么被放置元素将不会接收拖放元素的放置，也不会触发被放置元素的drop事件。

### effectAllowed
指定拖放时被允许的效果
- copy：复制到新的位置
- move：移动到新的位置
- link：建立一个源位置到新位置的链接
- copyLink：允许复制或者链接
- copyMove：允许复制或者移动
- linkMove：允许链接或者移动
- all：允许所有操作
- none：禁止所有操作（不允许放置）
- uninitialized：缺省值（默认值），相当于all

### 拖放图片
默认情况下，被拖放元素会以一个半透明图像的形式跟随鼠标一起移动，但是我们也可以通过设置拖放图像来设置跟随鼠标移动的图像
DataTransfer.setDragImgae(img, xOffset, yOffset)
- img：一个图像的Element元素
- xOffset：横向偏移量，正数向左偏移
- yOffset：纵向偏移量，正数向上偏移